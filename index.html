<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Fire Character Library</title><style>
/* ===== FONTS ===== */
@font-face {
  font-family: 'GFF Norm';
  src: url('./gff_norm.ttf') format('truetype'),
       url('./gff_norm.otf') format('opentype');
}
@font-face {
  font-family: 'GFF Thin';
  src: url('./gff_thin.ttf') format('truetype'),
       url('./gff_thin.otf') format('opentype');
}
@font-face {
  font-family: 'GFF Bold';
  src: url('./gff_bold.ttf') format('truetype'),
       url('./gff_bold.otf') format('opentype');
}

:root {
  --accent: #FFBB14;
  --bg-light: #ffffff;
  --bg-dark: #0b0b0c;
  --card-light: rgba(255,255,255,0.75);
  --card-dark: rgba(20,20,22,0.75);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  font-family: 'GFF Norm', system-ui, sans-serif;
  background: var(--bg-light);
  transition: background 0.4s ease;
}

body.dark {
  background: var(--bg-dark);
  color: white;
}

/* ===== HEADER ===== */
.header {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(20px);
  background: rgba(255,255,255,0.6);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

body.dark .header {
  background: rgba(10,10,12,0.6);
}

.logo {
  height: 42px;
  margin: auto;
  display: block;
}

.search-row {
  display: flex;
  gap: 8px;
}

.search {
  flex: 1;
  padding: 10px 14px;
  border-radius: 18px;
  border: none;
  outline: none;
  font-family: 'GFF Norm';
}

.filters {
  display: flex;
  gap: 6px;
  overflow-x: auto;
}

.filter-btn {
  padding: 6px 12px;
  border-radius: 14px;
  border: none;
  font-family: 'GFF Thin';
  background: #e5e5e7;
  cursor: pointer;
  white-space: nowrap;
}

body.dark .filter-btn { background: #1c1c1e; color: white; }

.filter-btn.active {
  background: var(--accent);
  color: black;
  font-family: 'GFF Bold';
}

/* ===== GRID ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
  padding: 14px;
}

@media (min-width: 900px) {
  .grid { grid-template-columns: repeat(4, 1fr); }
}

.card {
  aspect-ratio: 3/4;
  border-radius: 26px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  backdrop-filter: blur(20px);
  background: var(--card-light);
  transition: transform 0.1s ease;
}

body.dark .card { background: var(--card-dark); }

.card:active { transform: scale(0.93); }

.card img.main {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.identity {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 8px;
  font-size: 12px;
  font-family: 'GFF Thin';
  backdrop-filter: blur(12px);
  background: rgba(0,0,0,0.35);
  color: white;
}

.skill-icon {
  position: absolute;
  bottom: 6px;
  right: 6px;
  width: 34px;
  height: 34px;
  border-radius: 10px;
}

/* ===== PORTAL ===== */
#portal {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 100;
  overflow: auto;
  backdrop-filter: blur(30px);
}

.portal-card {
  min-height: 100vh;
  padding: 20px;
}

.portal-img {
  width: 100%;
  border-radius: 22px;
}

.skill-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 14px;
}

.skill-row h2 {
  font-family: 'GFF Bold';
  margin: 0;
}

.skill-row img {
  width: 48px;
  height: 48px;
  border-radius: 12px;
}

.skill-text {
  margin-top: 10px;
  font-family: 'GFF Thin';
  line-height: 1.4;
}

.meta {
  margin-top: 10px;
  font-family: 'GFF Thin';
}

/* CLOSE BUTTON */
.close-btn {
  position: fixed;
  top: 16px;
  right: 16px;
  width: 46px;
  height: 46px;
  border-radius: 50%;
  border: none;
  background: #ff3b30;
  color: white;
  font-size: 20px;
  box-shadow: 0 0 18px rgba(255,59,48,0.8);
  cursor: pointer;
}

</style></head>
<body><div class="header">
  <img src="Logo.png" class="logo">
  <div class="search-row">
    <input id="search" class="search" placeholder="Search characters...">
  </div>
  <div class="filters" id="filters"></div>
</div><div class="grid" id="grid"></div><div id="portal">
  <button class="close-btn" onclick="closePortal()">✕</button>
  <div class="portal-card" id="portalContent"></div>
</div><script>
const GITHUB_URL = "https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/character/";

let characters = [];
let activeFilter = 'all';

const filterOptions = ['all','teamwork','survival','attacking','info','male','female','active','passive'];

const filtersDiv = document.getElementById('filters');
filterOptions.forEach(f => {
  const btn = document.createElement('button');
  btn.className = 'filter-btn';
  btn.textContent = f;
  btn.onclick = () => {
    activeFilter = f;
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    render();
  };
  filtersDiv.appendChild(btn);
});
filtersDiv.firstChild.classList.add('active');

async function loadCharacters() {
  try {
    const res = await fetch(GITHUB_URL + 'index.json');
    const list = await res.json();
    const data = await Promise.all(list.map(f => fetch(GITHUB_URL+f).then(r=>r.json())));
    characters = data;
    render();
  } catch(e) {
    console.error(e);
  }
}

function matchesFilter(c) {
  if(activeFilter==='all') return true;
  if(['male','female'].includes(activeFilter)) return c.gender===activeFilter;
  if(['active','passive'].includes(activeFilter)) return c.type===activeFilter;
  return c.category===activeFilter;
}

function render() {
  const grid = document.getElementById('grid');
  const q = document.getElementById('search').value.toLowerCase();
  grid.innerHTML='';

  characters
    .filter(c => c.name.toLowerCase().includes(q))
    .filter(matchesFilter)
    .forEach(c => {
      const card = document.createElement('div');
      card.className='card';
      card.onclick=()=>openPortal(c);

      card.innerHTML=`
        <img class="main" loading="lazy" src="${c.characterPhoto}">
        <div class="identity">${c.identity}</div>
        <img class="skill-icon" loading="lazy" src="${c.skillPhoto}">
      `;

      grid.appendChild(card);
    });
}

document.getElementById('search').oninput = render;

function openPortal(c) {
  const portal=document.getElementById('portal');
  const pc=document.getElementById('portalContent');

  pc.innerHTML=`
    <img class="portal-img" src="${c.characterPhoto}">
    <div class="skill-row">
      <h2>${c.skillName}</h2>
      <img src="${c.skillPhoto}">
    </div>
    <div class="skill-text">${c.skill}</div>
    <div class="meta">${c.gender} • ${c.type}</div>
  `;

  portal.style.display='block';
}

function closePortal() {
  document.getElementById('portal').style.display='none';
}

loadCharacters();
</script></body>
</html>
